
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="using LLM to create and Explore topics in an innovative way">
      
      
        <meta name="author" content="Charles de Dampierre">
      
      
        <link rel="canonical" href="https://charlesdedampierre.github.io/BunkaTopics/bunka-api/bourdieu/bourdieu-api.html">
      
      
        <link rel="prev" href="../topic_modeling/topic-ranker.html">
      
      
        <link rel="next" href="../visualization/topic-visualization.html">
      
      
      <link rel="icon" href="../../img/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.4">
    
    
      
        <title>Bourdieu API - BunkaTopics</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.50c56a3b.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
      
        <meta  property="og:type"  content="website" >
      
        <meta  property="og:title"  content="Bourdieu API - BunkaTopics" >
      
        <meta  property="og:description"  content="using LLM to create and Explore topics in an innovative way" >
      
        <meta  property="og:image"  content="https://charlesdedampierre.github.io/BunkaTopics/assets/images/social/bunka-api/bourdieu/bourdieu-api.png" >
      
        <meta  property="og:image:type"  content="image/png" >
      
        <meta  property="og:image:width"  content="1200" >
      
        <meta  property="og:image:height"  content="630" >
      
        <meta  property="og:url"  content="https://charlesdedampierre.github.io/BunkaTopics/bunka-api/bourdieu/bourdieu-api.html" >
      
        <meta  name="twitter:card"  content="summary_large_image" >
      
        <meta  name="twitter:title"  content="Bourdieu API - BunkaTopics" >
      
        <meta  name="twitter:description"  content="using LLM to create and Explore topics in an innovative way" >
      
        <meta  name="twitter:image"  content="https://charlesdedampierre.github.io/BunkaTopics/assets/images/social/bunka-api/bourdieu/bourdieu-api.png" >
      
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="black" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#bourdieu-api" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../index.html" title="BunkaTopics" class="md-header__button md-logo" aria-label="BunkaTopics" data-md-component="logo">
      
  <img src="../../img/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            BunkaTopics
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Bourdieu API
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="black" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="white" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/charlesdedampierre/BunkaTopics" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../index.html" class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../getting-started.html" class="md-tabs__link">
        
  
    
  
  Getting Started

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../topic_exploration.html" class="md-tabs__link">
        
  
    
  
  Topic Exploration

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../fine-tuning.html" class="md-tabs__link">
        
  
    
  
  Cleaning Data for LLM

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../framing-analysis.html" class="md-tabs__link">
        
  
    
  
  Framing Analysis

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../contribution.html" class="md-tabs__link">
        
  
    
  
  Contributing

      </a>
    </li>
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../bunkatopics.html" class="md-tabs__link">
          
  
  API

        </a>
      </li>
    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../changelog.html" class="md-tabs__link">
        
  
    
  
  Changelog

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../index.html" title="BunkaTopics" class="md-nav__button md-logo" aria-label="BunkaTopics" data-md-component="logo">
      
  <img src="../../img/logo.png" alt="logo">

    </a>
    BunkaTopics
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/charlesdedampierre/BunkaTopics" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting Started
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../topic_exploration.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Topic Exploration
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../fine-tuning.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cleaning Data for LLM
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../framing-analysis.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Framing Analysis
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contribution.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contributing
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" checked>
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="">
            
  
  <span class="md-ellipsis">
    API
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            API
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../bunkatopics.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Bunka
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../topic_modeling/topic_model_builder.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Topic Modeling
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../topic_modeling/terms_extractor.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Term Extractor
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../topic_modeling/topic_llm_cleaning.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Topic LLM Cleaner
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../topic_modeling/topic-ranker.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Document Ranker in Topics
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Bourdieu API
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="bourdieu-api.html" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Bourdieu API
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#bunkatopics.bourdieu.bourdieu_api.BourdieuAPI" class="md-nav__link">
    <span class="md-ellipsis">
      BourdieuAPI
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bunkatopics.bourdieu.bourdieu_api.BourdieuAPI.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bunkatopics.bourdieu.bourdieu_api.BourdieuAPI.fit_transform" class="md-nav__link">
    <span class="md-ellipsis">
      fit_transform
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_7" >
        
          
          <label class="md-nav__link" for="__nav_7_7" id="__nav_7_7_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Visualization
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_7">
            <span class="md-nav__icon md-icon"></span>
            Visualization
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../visualization/topic-visualization.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Topic Modeling Visualization
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="bourdieu-visualization.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Bourdieu Visualization
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="bourdieu-visualization-one-dimension.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Bourdieu Visualization One Dimension
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../changelog.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Changelog
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#bunkatopics.bourdieu.bourdieu_api.BourdieuAPI" class="md-nav__link">
    <span class="md-ellipsis">
      BourdieuAPI
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bunkatopics.bourdieu.bourdieu_api.BourdieuAPI.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bunkatopics.bourdieu.bourdieu_api.BourdieuAPI.fit_transform" class="md-nav__link">
    <span class="md-ellipsis">
      fit_transform
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="bourdieu-api">Bourdieu API<a class="headerlink" href="#bourdieu-api" title="Permanent link">&para;</a></h1>


<div class="doc doc-object doc-class">



<a id="bunkatopics.bourdieu.bourdieu_api.BourdieuAPI"></a>
  <div class="doc doc-contents first">

  
      <p>A class for performing Bourdieu analysis on a collection of documents.</p>
<p>This class leverages an embedding model to compute Bourdieu dimensions and topics
for the given documents. It supports customization of the analysis through various parameters
and the use of generative AI for topic naming.</p>

            <details class="quote">
              <summary>Source code in <code>bunkatopics/bourdieu/bourdieu_api.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">BourdieuAPI</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A class for performing Bourdieu analysis on a collection of documents.</span>

<span class="sd">    This class leverages an embedding model to compute Bourdieu dimensions and topics</span>
<span class="sd">    for the given documents. It supports customization of the analysis through various parameters</span>
<span class="sd">    and the use of generative AI for topic naming.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">embedding_model</span><span class="p">:</span> <span class="n">Embeddings</span><span class="p">,</span>
        <span class="n">llm</span><span class="p">:</span> <span class="n">t</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">LLM</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">bourdieu_query</span><span class="p">:</span> <span class="n">BourdieuQuery</span> <span class="o">=</span> <span class="n">BourdieuQuery</span><span class="p">(),</span>
        <span class="n">topic_param</span><span class="p">:</span> <span class="n">TopicParam</span> <span class="o">=</span> <span class="n">TopicParam</span><span class="p">(),</span>
        <span class="n">topic_gen_param</span><span class="p">:</span> <span class="n">TopicGenParam</span> <span class="o">=</span> <span class="n">TopicGenParam</span><span class="p">(),</span>
        <span class="n">min_count_terms</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
        <span class="n">ranking_terms</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span>
        <span class="n">min_docs_per_cluster</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes the BourdieuAPI with the provided models, parameters, and configurations.</span>

<span class="sd">        Args:</span>
<span class="sd">            llm: The generative AI model for topic naming.</span>
<span class="sd">            embedding_model: The model used for embedding documents.</span>
<span class="sd">            bourdieu_query (BourdieuQuery, optional): Configuration for Bourdieu analysis.</span>
<span class="sd">                                                       Defaults to BourdieuQuery().</span>
<span class="sd">            topic_param (TopicParam, optional): Parameters for topic modeling. Defaults to TopicParam().</span>
<span class="sd">            topic_gen_param (TopicGenParam, optional): Parameters for the generative AI in topic naming.</span>
<span class="sd">                                                       Defaults to TopicGenParam().</span>
<span class="sd">            min_count_terms (int, optional): Minimum term count for topic modeling. Defaults to 2.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">llm</span> <span class="o">=</span> <span class="n">llm</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">embedding_model</span> <span class="o">=</span> <span class="n">embedding_model</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bourdieu_query</span> <span class="o">=</span> <span class="n">bourdieu_query</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">topic_param</span> <span class="o">=</span> <span class="n">topic_param</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">topic_gen_param</span> <span class="o">=</span> <span class="n">topic_gen_param</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">min_count_terms</span> <span class="o">=</span> <span class="n">min_count_terms</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ranking_terms</span> <span class="o">=</span> <span class="n">ranking_terms</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">min_docs_per_cluster</span> <span class="o">=</span> <span class="n">min_docs_per_cluster</span>

    <span class="k">def</span> <span class="nf">fit_transform</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">docs</span><span class="p">:</span> <span class="n">t</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">Document</span><span class="p">],</span> <span class="n">terms</span><span class="p">:</span> <span class="n">t</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">Term</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">t</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="n">t</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">Document</span><span class="p">],</span> <span class="n">t</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">Topic</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Processes the documents and terms to compute Bourdieu dimensions and topics.</span>

<span class="sd">        This method applies the embedding model to compute Bourdieu dimensions for each document</span>
<span class="sd">        based on provided queries. It also performs topic modeling on the documents and, if enabled,</span>
<span class="sd">        uses a generative AI model for naming the topics.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            docs (List[Document]): List of Document objects representing the documents to be analyzed.</span>
<span class="sd">            terms (List[Term]): List of Term objects representing the terms to be used in topic modeling.</span>

<span class="sd">        Notes:</span>
<span class="sd">            - The method first resets Bourdieu dimensions for all documents.</span>
<span class="sd">            - It computes Bourdieu continuums based on the configured left and right words.</span>
<span class="sd">            - Documents are then filtered based on their position relative to a defined radius in the Bourdieu space.</span>
<span class="sd">            - Topic modeling is performed on the filtered set of documents.</span>
<span class="sd">            - If `generative_ai_name` is True, topics are named using the generative AI model.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># Reset Bourdieu dimensions for all documents</span>
        <span class="k">for</span> <span class="n">doc</span> <span class="ow">in</span> <span class="n">docs</span><span class="p">:</span>
            <span class="n">doc</span><span class="o">.</span><span class="n">bourdieu_dimensions</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="c1"># Compute Continuums</span>
        <span class="n">new_docs</span> <span class="o">=</span> <span class="n">_get_continuum</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">embedding_model</span><span class="p">,</span>
            <span class="n">docs</span><span class="p">,</span>
            <span class="n">cont_name</span><span class="o">=</span><span class="s2">&quot;cont1&quot;</span><span class="p">,</span>
            <span class="n">left_words</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">bourdieu_query</span><span class="o">.</span><span class="n">x_left_words</span><span class="p">,</span>
            <span class="n">right_words</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">bourdieu_query</span><span class="o">.</span><span class="n">x_right_words</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">bourdieu_docs</span> <span class="o">=</span> <span class="n">_get_continuum</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">embedding_model</span><span class="p">,</span>
            <span class="n">new_docs</span><span class="p">,</span>
            <span class="n">cont_name</span><span class="o">=</span><span class="s2">&quot;cont2&quot;</span><span class="p">,</span>
            <span class="n">left_words</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">bourdieu_query</span><span class="o">.</span><span class="n">y_top_words</span><span class="p">,</span>
            <span class="n">right_words</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">bourdieu_query</span><span class="o">.</span><span class="n">y_bottom_words</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1"># Process and transform data</span>
        <span class="n">df_bourdieu</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="p">{</span>
                    <span class="s2">&quot;doc_id&quot;</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">doc_id</span><span class="p">,</span>
                    <span class="s2">&quot;coordinates&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">y</span><span class="o">.</span><span class="n">distance</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">x</span><span class="o">.</span><span class="n">bourdieu_dimensions</span><span class="p">],</span>
                    <span class="s2">&quot;names&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">y</span><span class="o">.</span><span class="n">continuum</span><span class="o">.</span><span class="n">id</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">x</span><span class="o">.</span><span class="n">bourdieu_dimensions</span><span class="p">],</span>
                <span class="p">}</span>
                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">bourdieu_docs</span>
            <span class="p">]</span>
        <span class="p">)</span>
        <span class="n">df_bourdieu</span> <span class="o">=</span> <span class="n">df_bourdieu</span><span class="o">.</span><span class="n">explode</span><span class="p">([</span><span class="s2">&quot;coordinates&quot;</span><span class="p">,</span> <span class="s2">&quot;names&quot;</span><span class="p">])</span>

        <span class="n">df_bourdieu_pivot</span> <span class="o">=</span> <span class="n">df_bourdieu</span><span class="p">[[</span><span class="s2">&quot;doc_id&quot;</span><span class="p">,</span> <span class="s2">&quot;coordinates&quot;</span><span class="p">,</span> <span class="s2">&quot;names&quot;</span><span class="p">]]</span>
        <span class="n">df_bourdieu_pivot</span> <span class="o">=</span> <span class="n">df_bourdieu_pivot</span><span class="o">.</span><span class="n">pivot</span><span class="p">(</span>
            <span class="n">index</span><span class="o">=</span><span class="s2">&quot;doc_id&quot;</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="s2">&quot;names&quot;</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="s2">&quot;coordinates&quot;</span>
        <span class="p">)</span>

        <span class="c1"># Add to the bourdieu_docs</span>
        <span class="n">df_outsides</span> <span class="o">=</span> <span class="n">df_bourdieu_pivot</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
        <span class="n">df_outsides</span><span class="p">[</span><span class="s2">&quot;cont1&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_outsides</span><span class="p">[</span><span class="s2">&quot;cont1&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>
        <span class="n">df_outsides</span><span class="p">[</span><span class="s2">&quot;cont2&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_outsides</span><span class="p">[</span><span class="s2">&quot;cont2&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>

        <span class="n">x_values</span> <span class="o">=</span> <span class="n">df_outsides</span><span class="p">[</span><span class="s2">&quot;cont1&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>
        <span class="n">y_values</span> <span class="o">=</span> <span class="n">df_outsides</span><span class="p">[</span><span class="s2">&quot;cont2&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>

        <span class="n">distances</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">x_values</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">y_values</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
        <span class="n">circle_radius</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">df_outsides</span><span class="o">.</span><span class="n">cont1</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">bourdieu_query</span><span class="o">.</span><span class="n">radius_size</span>

        <span class="n">df_outsides</span><span class="p">[</span><span class="s2">&quot;distances&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">distances</span>
        <span class="n">df_outsides</span><span class="p">[</span><span class="s2">&quot;outside&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;0&quot;</span>
        <span class="n">df_outsides</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df_outsides</span><span class="p">[</span><span class="s2">&quot;distances&quot;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">circle_radius</span><span class="p">,</span> <span class="s2">&quot;outside&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;1&quot;</span>

        <span class="n">outside_ids</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">df_outsides</span><span class="p">[</span><span class="s2">&quot;doc_id&quot;</span><span class="p">][</span><span class="n">df_outsides</span><span class="p">[</span><span class="s2">&quot;outside&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;1&quot;</span><span class="p">])</span>
        <span class="n">bourdieu_docs</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">bourdieu_docs</span> <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">doc_id</span> <span class="ow">in</span> <span class="n">outside_ids</span><span class="p">]</span>
        <span class="n">bourdieu_dict</span> <span class="o">=</span> <span class="n">df_bourdieu_pivot</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(</span><span class="n">orient</span><span class="o">=</span><span class="s2">&quot;index&quot;</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">doc</span> <span class="ow">in</span> <span class="n">bourdieu_docs</span><span class="p">:</span>
            <span class="n">doc</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">bourdieu_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">doc_id</span><span class="p">)[</span><span class="s2">&quot;cont1&quot;</span><span class="p">]</span>
            <span class="n">doc</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">bourdieu_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">doc_id</span><span class="p">)[</span><span class="s2">&quot;cont2&quot;</span><span class="p">]</span>

        <span class="c1"># Compute Bourdieu topics</span>
        <span class="n">topic_model</span> <span class="o">=</span> <span class="n">BunkaTopicModeling</span><span class="p">(</span>
            <span class="n">n_clusters</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">topic_param</span><span class="o">.</span><span class="n">n_clusters</span><span class="p">,</span>
            <span class="n">ngrams</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">topic_param</span><span class="o">.</span><span class="n">ngrams</span><span class="p">,</span>
            <span class="n">name_length</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">topic_param</span><span class="o">.</span><span class="n">name_length</span><span class="p">,</span>
            <span class="n">top_terms_overall</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">topic_param</span><span class="o">.</span><span class="n">top_terms_overall</span><span class="p">,</span>
            <span class="n">min_count_terms</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">min_count_terms</span><span class="p">,</span>
            <span class="n">min_docs_per_cluster</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">min_docs_per_cluster</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">bourdieu_topics</span><span class="p">:</span> <span class="n">t</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">Topic</span><span class="p">]</span> <span class="o">=</span> <span class="n">topic_model</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span>
            <span class="n">docs</span><span class="o">=</span><span class="n">bourdieu_docs</span><span class="p">,</span>
            <span class="n">terms</span><span class="o">=</span><span class="n">terms</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">model_ranker</span> <span class="o">=</span> <span class="n">DocumentRanker</span><span class="p">(</span><span class="n">ranking_terms</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">ranking_terms</span><span class="p">)</span>
        <span class="n">bourdieu_docs</span><span class="p">,</span> <span class="n">bourdieu_topics</span> <span class="o">=</span> <span class="n">model_ranker</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span>
            <span class="n">bourdieu_docs</span><span class="p">,</span> <span class="n">bourdieu_topics</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="p">:</span>
            <span class="n">model_cleaning</span> <span class="o">=</span> <span class="n">LLMCleaningTopic</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="p">,</span>
                <span class="n">language</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">topic_gen_param</span><span class="o">.</span><span class="n">language</span><span class="p">,</span>
                <span class="n">use_doc</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">topic_gen_param</span><span class="o">.</span><span class="n">use_doc</span><span class="p">,</span>
                <span class="n">context</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">topic_gen_param</span><span class="o">.</span><span class="n">context</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">bourdieu_topics</span><span class="p">:</span> <span class="n">t</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">Topic</span><span class="p">]</span> <span class="o">=</span> <span class="n">model_cleaning</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span>
                <span class="n">bourdieu_topics</span><span class="p">,</span>
                <span class="n">bourdieu_docs</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">bourdieu_docs</span><span class="p">,</span> <span class="n">bourdieu_topics</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">



<h2 id="bunkatopics.bourdieu.bourdieu_api.BourdieuAPI.__init__" class="doc doc-heading">
          <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">embedding_model</span><span class="p">,</span> <span class="n">llm</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">bourdieu_query</span><span class="o">=</span><span class="n">BourdieuQuery</span><span class="p">(),</span> <span class="n">topic_param</span><span class="o">=</span><span class="n">TopicParam</span><span class="p">(),</span> <span class="n">topic_gen_param</span><span class="o">=</span><span class="n">TopicGenParam</span><span class="p">(),</span> <span class="n">min_count_terms</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">ranking_terms</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">min_docs_per_cluster</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span></code>

<a href="#bunkatopics.bourdieu.bourdieu_api.BourdieuAPI.__init__" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Initializes the BourdieuAPI with the provided models, parameters, and configurations.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>llm</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[<span title="langchain_core.language_models.llms.LLM">LLM</span>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The generative AI model for topic naming.</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>embedding_model</code></td>
          <td>
                <code><span title="langchain_core.embeddings.Embeddings">Embeddings</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The model used for embedding documents.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>bourdieu_query</code></td>
          <td>
                <code><span title="bunkatopics.datamodel.BourdieuQuery">BourdieuQuery</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Configuration for Bourdieu analysis.
                                       Defaults to BourdieuQuery().</p>
            </div>
          </td>
          <td>
                <code><span title="bunkatopics.datamodel.BourdieuQuery">BourdieuQuery</span>()</code>
          </td>
        </tr>
        <tr>
          <td><code>topic_param</code></td>
          <td>
                <code><span title="bunkatopics.datamodel.TopicParam">TopicParam</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Parameters for topic modeling. Defaults to TopicParam().</p>
            </div>
          </td>
          <td>
                <code><span title="bunkatopics.datamodel.TopicParam">TopicParam</span>()</code>
          </td>
        </tr>
        <tr>
          <td><code>topic_gen_param</code></td>
          <td>
                <code><span title="bunkatopics.datamodel.TopicGenParam">TopicGenParam</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Parameters for the generative AI in topic naming.
                                       Defaults to TopicGenParam().</p>
            </div>
          </td>
          <td>
                <code><span title="bunkatopics.datamodel.TopicGenParam">TopicGenParam</span>()</code>
          </td>
        </tr>
        <tr>
          <td><code>min_count_terms</code></td>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Minimum term count for topic modeling. Defaults to 2.</p>
            </div>
          </td>
          <td>
                <code>2</code>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>bunkatopics/bourdieu/bourdieu_api.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">embedding_model</span><span class="p">:</span> <span class="n">Embeddings</span><span class="p">,</span>
    <span class="n">llm</span><span class="p">:</span> <span class="n">t</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">LLM</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">bourdieu_query</span><span class="p">:</span> <span class="n">BourdieuQuery</span> <span class="o">=</span> <span class="n">BourdieuQuery</span><span class="p">(),</span>
    <span class="n">topic_param</span><span class="p">:</span> <span class="n">TopicParam</span> <span class="o">=</span> <span class="n">TopicParam</span><span class="p">(),</span>
    <span class="n">topic_gen_param</span><span class="p">:</span> <span class="n">TopicGenParam</span> <span class="o">=</span> <span class="n">TopicGenParam</span><span class="p">(),</span>
    <span class="n">min_count_terms</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
    <span class="n">ranking_terms</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span>
    <span class="n">min_docs_per_cluster</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initializes the BourdieuAPI with the provided models, parameters, and configurations.</span>

<span class="sd">    Args:</span>
<span class="sd">        llm: The generative AI model for topic naming.</span>
<span class="sd">        embedding_model: The model used for embedding documents.</span>
<span class="sd">        bourdieu_query (BourdieuQuery, optional): Configuration for Bourdieu analysis.</span>
<span class="sd">                                                   Defaults to BourdieuQuery().</span>
<span class="sd">        topic_param (TopicParam, optional): Parameters for topic modeling. Defaults to TopicParam().</span>
<span class="sd">        topic_gen_param (TopicGenParam, optional): Parameters for the generative AI in topic naming.</span>
<span class="sd">                                                   Defaults to TopicGenParam().</span>
<span class="sd">        min_count_terms (int, optional): Minimum term count for topic modeling. Defaults to 2.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">llm</span> <span class="o">=</span> <span class="n">llm</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">embedding_model</span> <span class="o">=</span> <span class="n">embedding_model</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">bourdieu_query</span> <span class="o">=</span> <span class="n">bourdieu_query</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">topic_param</span> <span class="o">=</span> <span class="n">topic_param</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">topic_gen_param</span> <span class="o">=</span> <span class="n">topic_gen_param</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">min_count_terms</span> <span class="o">=</span> <span class="n">min_count_terms</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">ranking_terms</span> <span class="o">=</span> <span class="n">ranking_terms</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">min_docs_per_cluster</span> <span class="o">=</span> <span class="n">min_docs_per_cluster</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h2 id="bunkatopics.bourdieu.bourdieu_api.BourdieuAPI.fit_transform" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">fit_transform</span><span class="p">(</span><span class="n">docs</span><span class="p">,</span> <span class="n">terms</span><span class="p">)</span></code>

<a href="#bunkatopics.bourdieu.bourdieu_api.BourdieuAPI.fit_transform" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Processes the documents and terms to compute Bourdieu dimensions and topics.</p>
<p>This method applies the embedding model to compute Bourdieu dimensions for each document
based on provided queries. It also performs topic modeling on the documents and, if enabled,
uses a generative AI model for naming the topics.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>docs</code></td>
          <td>
                <code>List[<span title="bunkatopics.datamodel.Document">Document</span>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>List of Document objects representing the documents to be analyzed.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>terms</code></td>
          <td>
                <code>List[<span title="bunkatopics.datamodel.Term">Term</span>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>List of Term objects representing the terms to be used in topic modeling.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

<details class="notes" open>
  <summary>Notes</summary>
  <ul>
<li>The method first resets Bourdieu dimensions for all documents.</li>
<li>It computes Bourdieu continuums based on the configured left and right words.</li>
<li>Documents are then filtered based on their position relative to a defined radius in the Bourdieu space.</li>
<li>Topic modeling is performed on the filtered set of documents.</li>
<li>If <code>generative_ai_name</code> is True, topics are named using the generative AI model.</li>
</ul>
</details>
          <details class="quote">
            <summary>Source code in <code>bunkatopics/bourdieu/bourdieu_api.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">fit_transform</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">docs</span><span class="p">:</span> <span class="n">t</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">Document</span><span class="p">],</span> <span class="n">terms</span><span class="p">:</span> <span class="n">t</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">Term</span><span class="p">]</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">t</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="n">t</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">Document</span><span class="p">],</span> <span class="n">t</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">Topic</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Processes the documents and terms to compute Bourdieu dimensions and topics.</span>

<span class="sd">    This method applies the embedding model to compute Bourdieu dimensions for each document</span>
<span class="sd">    based on provided queries. It also performs topic modeling on the documents and, if enabled,</span>
<span class="sd">    uses a generative AI model for naming the topics.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        docs (List[Document]): List of Document objects representing the documents to be analyzed.</span>
<span class="sd">        terms (List[Term]): List of Term objects representing the terms to be used in topic modeling.</span>

<span class="sd">    Notes:</span>
<span class="sd">        - The method first resets Bourdieu dimensions for all documents.</span>
<span class="sd">        - It computes Bourdieu continuums based on the configured left and right words.</span>
<span class="sd">        - Documents are then filtered based on their position relative to a defined radius in the Bourdieu space.</span>
<span class="sd">        - Topic modeling is performed on the filtered set of documents.</span>
<span class="sd">        - If `generative_ai_name` is True, topics are named using the generative AI model.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Reset Bourdieu dimensions for all documents</span>
    <span class="k">for</span> <span class="n">doc</span> <span class="ow">in</span> <span class="n">docs</span><span class="p">:</span>
        <span class="n">doc</span><span class="o">.</span><span class="n">bourdieu_dimensions</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="c1"># Compute Continuums</span>
    <span class="n">new_docs</span> <span class="o">=</span> <span class="n">_get_continuum</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">embedding_model</span><span class="p">,</span>
        <span class="n">docs</span><span class="p">,</span>
        <span class="n">cont_name</span><span class="o">=</span><span class="s2">&quot;cont1&quot;</span><span class="p">,</span>
        <span class="n">left_words</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">bourdieu_query</span><span class="o">.</span><span class="n">x_left_words</span><span class="p">,</span>
        <span class="n">right_words</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">bourdieu_query</span><span class="o">.</span><span class="n">x_right_words</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">bourdieu_docs</span> <span class="o">=</span> <span class="n">_get_continuum</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">embedding_model</span><span class="p">,</span>
        <span class="n">new_docs</span><span class="p">,</span>
        <span class="n">cont_name</span><span class="o">=</span><span class="s2">&quot;cont2&quot;</span><span class="p">,</span>
        <span class="n">left_words</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">bourdieu_query</span><span class="o">.</span><span class="n">y_top_words</span><span class="p">,</span>
        <span class="n">right_words</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">bourdieu_query</span><span class="o">.</span><span class="n">y_bottom_words</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># Process and transform data</span>
    <span class="n">df_bourdieu</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
        <span class="p">[</span>
            <span class="p">{</span>
                <span class="s2">&quot;doc_id&quot;</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">doc_id</span><span class="p">,</span>
                <span class="s2">&quot;coordinates&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">y</span><span class="o">.</span><span class="n">distance</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">x</span><span class="o">.</span><span class="n">bourdieu_dimensions</span><span class="p">],</span>
                <span class="s2">&quot;names&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">y</span><span class="o">.</span><span class="n">continuum</span><span class="o">.</span><span class="n">id</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">x</span><span class="o">.</span><span class="n">bourdieu_dimensions</span><span class="p">],</span>
            <span class="p">}</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">bourdieu_docs</span>
        <span class="p">]</span>
    <span class="p">)</span>
    <span class="n">df_bourdieu</span> <span class="o">=</span> <span class="n">df_bourdieu</span><span class="o">.</span><span class="n">explode</span><span class="p">([</span><span class="s2">&quot;coordinates&quot;</span><span class="p">,</span> <span class="s2">&quot;names&quot;</span><span class="p">])</span>

    <span class="n">df_bourdieu_pivot</span> <span class="o">=</span> <span class="n">df_bourdieu</span><span class="p">[[</span><span class="s2">&quot;doc_id&quot;</span><span class="p">,</span> <span class="s2">&quot;coordinates&quot;</span><span class="p">,</span> <span class="s2">&quot;names&quot;</span><span class="p">]]</span>
    <span class="n">df_bourdieu_pivot</span> <span class="o">=</span> <span class="n">df_bourdieu_pivot</span><span class="o">.</span><span class="n">pivot</span><span class="p">(</span>
        <span class="n">index</span><span class="o">=</span><span class="s2">&quot;doc_id&quot;</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="s2">&quot;names&quot;</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="s2">&quot;coordinates&quot;</span>
    <span class="p">)</span>

    <span class="c1"># Add to the bourdieu_docs</span>
    <span class="n">df_outsides</span> <span class="o">=</span> <span class="n">df_bourdieu_pivot</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
    <span class="n">df_outsides</span><span class="p">[</span><span class="s2">&quot;cont1&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_outsides</span><span class="p">[</span><span class="s2">&quot;cont1&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>
    <span class="n">df_outsides</span><span class="p">[</span><span class="s2">&quot;cont2&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_outsides</span><span class="p">[</span><span class="s2">&quot;cont2&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>

    <span class="n">x_values</span> <span class="o">=</span> <span class="n">df_outsides</span><span class="p">[</span><span class="s2">&quot;cont1&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>
    <span class="n">y_values</span> <span class="o">=</span> <span class="n">df_outsides</span><span class="p">[</span><span class="s2">&quot;cont2&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>

    <span class="n">distances</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">x_values</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">y_values</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">circle_radius</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">df_outsides</span><span class="o">.</span><span class="n">cont1</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">bourdieu_query</span><span class="o">.</span><span class="n">radius_size</span>

    <span class="n">df_outsides</span><span class="p">[</span><span class="s2">&quot;distances&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">distances</span>
    <span class="n">df_outsides</span><span class="p">[</span><span class="s2">&quot;outside&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;0&quot;</span>
    <span class="n">df_outsides</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df_outsides</span><span class="p">[</span><span class="s2">&quot;distances&quot;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">circle_radius</span><span class="p">,</span> <span class="s2">&quot;outside&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;1&quot;</span>

    <span class="n">outside_ids</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">df_outsides</span><span class="p">[</span><span class="s2">&quot;doc_id&quot;</span><span class="p">][</span><span class="n">df_outsides</span><span class="p">[</span><span class="s2">&quot;outside&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;1&quot;</span><span class="p">])</span>
    <span class="n">bourdieu_docs</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">bourdieu_docs</span> <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">doc_id</span> <span class="ow">in</span> <span class="n">outside_ids</span><span class="p">]</span>
    <span class="n">bourdieu_dict</span> <span class="o">=</span> <span class="n">df_bourdieu_pivot</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(</span><span class="n">orient</span><span class="o">=</span><span class="s2">&quot;index&quot;</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">doc</span> <span class="ow">in</span> <span class="n">bourdieu_docs</span><span class="p">:</span>
        <span class="n">doc</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">bourdieu_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">doc_id</span><span class="p">)[</span><span class="s2">&quot;cont1&quot;</span><span class="p">]</span>
        <span class="n">doc</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">bourdieu_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">doc_id</span><span class="p">)[</span><span class="s2">&quot;cont2&quot;</span><span class="p">]</span>

    <span class="c1"># Compute Bourdieu topics</span>
    <span class="n">topic_model</span> <span class="o">=</span> <span class="n">BunkaTopicModeling</span><span class="p">(</span>
        <span class="n">n_clusters</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">topic_param</span><span class="o">.</span><span class="n">n_clusters</span><span class="p">,</span>
        <span class="n">ngrams</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">topic_param</span><span class="o">.</span><span class="n">ngrams</span><span class="p">,</span>
        <span class="n">name_length</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">topic_param</span><span class="o">.</span><span class="n">name_length</span><span class="p">,</span>
        <span class="n">top_terms_overall</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">topic_param</span><span class="o">.</span><span class="n">top_terms_overall</span><span class="p">,</span>
        <span class="n">min_count_terms</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">min_count_terms</span><span class="p">,</span>
        <span class="n">min_docs_per_cluster</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">min_docs_per_cluster</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">bourdieu_topics</span><span class="p">:</span> <span class="n">t</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">Topic</span><span class="p">]</span> <span class="o">=</span> <span class="n">topic_model</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span>
        <span class="n">docs</span><span class="o">=</span><span class="n">bourdieu_docs</span><span class="p">,</span>
        <span class="n">terms</span><span class="o">=</span><span class="n">terms</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">model_ranker</span> <span class="o">=</span> <span class="n">DocumentRanker</span><span class="p">(</span><span class="n">ranking_terms</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">ranking_terms</span><span class="p">)</span>
    <span class="n">bourdieu_docs</span><span class="p">,</span> <span class="n">bourdieu_topics</span> <span class="o">=</span> <span class="n">model_ranker</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span>
        <span class="n">bourdieu_docs</span><span class="p">,</span> <span class="n">bourdieu_topics</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="p">:</span>
        <span class="n">model_cleaning</span> <span class="o">=</span> <span class="n">LLMCleaningTopic</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">llm</span><span class="p">,</span>
            <span class="n">language</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">topic_gen_param</span><span class="o">.</span><span class="n">language</span><span class="p">,</span>
            <span class="n">use_doc</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">topic_gen_param</span><span class="o">.</span><span class="n">use_doc</span><span class="p">,</span>
            <span class="n">context</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">topic_gen_param</span><span class="o">.</span><span class="n">context</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">bourdieu_topics</span><span class="p">:</span> <span class="n">t</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">Topic</span><span class="p">]</span> <span class="o">=</span> <span class="n">model_cleaning</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span>
            <span class="n">bourdieu_topics</span><span class="p">,</span>
            <span class="n">bourdieu_docs</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="n">bourdieu_docs</span><span class="p">,</span> <span class="n">bourdieu_topics</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>


</div>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.sections", "navigation.instant", "navigation.top", "navigation.tracking", "toc.follow", "content.code.copy"], "search": "../../assets/javascripts/workers/search.c011b7c0.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.7389ff0e.min.js"></script>
      
    
  </body>
</html>